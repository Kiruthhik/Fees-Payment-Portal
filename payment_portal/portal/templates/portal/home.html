{% extends "portal/layout.html" %}
{% block title %}Home - Student Fee Payment Portal{% endblock %}

{% block content %}
<div class="dashboard">
    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% else %}
        <h2>Welcome back, {{ student.first_name }}!</h2>
        <p>Your profile summary and current fee details are shown below.</p>

        <!-- Summary Cards -->
        <div style="display: flex; gap: 20px; margin-top: 20px;">
            <div style="flex: 1; background: #f5f5f5; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <h3>Total Fees</h3>
                <p style="font-size: 1.5rem; font-weight: bold; color: #2e7d32;">‚Çπ {{ total_fee|floatformat:0 }}</p>
            </div>
            <div style="flex: 1; background: #f5f5f5; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <h3>Paid Amount</h3>
                <p style="font-size: 1.5rem; font-weight: bold; color: #1565c0;">‚Çπ {{ paid_amount|floatformat:0 }}</p>
            </div>
            <div style="flex: 1; background: #f5f5f5; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <h3>Pending Amount</h3>
                <p style="font-size: 1.5rem; font-weight: bold; color: #c62828;">‚Çπ {{ pending_amount|floatformat:0 }}</p>
            </div>
        </div>

        <!-- Student Details -->
        <h3 style="margin-top: 40px;">Profile Summary</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <tr><th style="text-align: left; padding: 8px;">Enrolment No</th><td>{{ student.enrolment_no }}</td></tr>
            <tr><th style="text-align: left; padding: 8px;">Email</th><td>{{ student.email }}</td></tr>
            <tr><th style="text-align: left; padding: 8px;">Residence Type</th><td>{{ student.get_residence_type_display }}</td></tr>
            <tr><th style="text-align: left; padding: 8px;">Admission Type</th><td>{{ student.get_admission_type_display }}</td></tr>
            <tr><th style="text-align: left; padding: 8px;">NRI</th><td>{% if student.is_nri %}Yes{% else %}No{% endif %}</td></tr>
        </table>

        <!-- Notifications -->
        <h3 style="margin-top: 40px;">Notifications</h3>
        <ul style="background: #fef6e4; padding: 15px; border-radius: 8px; list-style-type: none;">
            <li>‚ö†Ô∏è Payment for Semester 2 is due on <strong>10 Nov 2025</strong>.</li>
            <li>‚úÖ Last payment of ‚Çπ {{ paid_amount|floatformat:0 }} was successful.</li>
            <li>üì¢ Keep your contact details updated for future notifications.</li>
        </ul>
    {% endif %}
</div>
{% endblock %}
